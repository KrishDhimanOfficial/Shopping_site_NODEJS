<!DOCTYPE html>
<html lang="en">
<!-- Header Section Begin -->
<%- include('../site_partials/header') %>

    <!-- Header Section End -->

    <!-- breadcumb begin -->
    <div class="breadcrumb-option">
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="breadcrumb__links">
                        <a href="/home"><i class="fa fa-home"></i> Home</a>
                        <span>Shop</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Shop Section Begin -->
    <section class="shop spad">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="shop__sidebar">
                        <div class="sidebar__categories">
                            <div class="section-title">
                                <h4>Categories</h4>
                            </div>
                            <div class="categories__accordion">
                                <div class="accordion" id="accordionExample">
                                    <% if (locals.categories) { %>
                                        <% categories.forEach((category,i)=> { %>
                                            <div class="card">
                                                <div class="card-heading active">
                                                    <a data-toggle="collapse" data-target="#collapse-<%= i %>">
                                                        <%= category.category_name %>
                                                    </a>
                                                </div>
                                                <div id="collapse-<%= i %>" class="collapse"
                                                    data-parent="#accordionExample">
                                                    <div class="card-body">
                                                        <ul>
                                                            <% category.sub.forEach(sub_category=> { %>
                                                                <li>
                                                                    <a
                                                                        href="/category/<%= category.category_name %>/<%= sub_category.category_name %>/<%= sub_category._id %>">
                                                                        <%= sub_category.category_name %>
                                                                    </a>
                                                                </li>
                                                            <% }) %>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        <% }) %>
                                    <% } %>
                                </div>
                            </div>
                        </div>
                        <div class="sidebar__filter">
                            <div class="section-title">
                                <h4>Shop by price</h4>
                            </div>
                            <div class="filter-range-wrap">
                                <div class="price-range ui-slider ui-corner-all ui-slider-horizontal ui-widget ui-widget-content"
                                    data-min="10" data-max="100"></div>
                                <div class="range-slider">
                                    <div class="price-input">
                                        <p>Price:</p>
                                        <input type="text" id="minamount">
                                        <input type="text" id="maxamount">
                                    </div>
                                </div>
                            </div>
                            <a href="#">Filter</a>
                        </div>
                        <div class="sidebar__sizes">
                            <div class="section-title">
                                <h4>Shop by size</h4>
                            </div>
                            <div class="size__list">
                                <% if (locals.sizes) { %>
                                    <% sizes.forEach(size=> { %>
                                        <label for="<%= size.size_name %>">
                                            <%= size.size_name %>
                                                <input type="checkbox" id="<%= size.size_name %>">
                                                <span class="checkmark"></span>
                                        </label>
                                    <% }) %>
                                <% } %>
                            </div>
                        </div>
                        <div class="sidebar__color">
                            <div class="section-title">
                                <h4>Shop by Color</h4>
                            </div>
                            <div class="size__list color__list">
                                <% if (locals.colors) { %>
                                    <% colors.forEach(color=> { %>
                                        <label for="<%= color.color_name %>">
                                            <%= color.color_name %>
                                                <input type="checkbox" id="<%= color.color_name %>">
                                                <span class="checkmark"></span>
                                        </label>
                                    <% }) %>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-9 col-md-9">
                    <div class="row">
                        <% if (locals.products) { %>
                                <% const productArray=products.collectionData[0]?.product; %>
                                <% productArray?.forEach(product=> { %>
                                    <div class="col-lg-4 col-md-6">
                                        <div class="product__item">
                                            <div class="product__item__pic set-bg"
                                                data-setbg="/uploads/<%= product.product_image[0] %>">
                                                <% if (product.product_new==true) { %>
                                                    <div class="label new">
                                                        New
                                                    </div>
                                                <% } %>
                                                <% if(product.product_on_sales==true) {%>
                                                    <div class="label sale">Sale</div>
                                                <% }%>
                                                    <ul class="product__hover">
                                                        <li>
                                                            <a href="/uploads/<%= product.product_image[0] %>" class="image-popup">
                                                                <span class="arrow_expand"></span>
                                                            </a>
                                                        </li>
                                                        <li>
                                                            <button onclick="(()=>{ likebtn('<%= product._id %>') })()">
                                                                <span class="icon_heart_alt like"></span>
                                                            </button>
                                                        </li>
                                                        <li>
                                                            <button onclick="((e)=>{ addToCart('<%= product._id %>') })()">
                                                                <span class="icon_bag_alt"></span>
                                                            </button>
                                                        </li>
                                                    </ul>
                                            </div>
                                            <div class="product__item__text">
                                                <h6><a href="/product/<%= product._id%>">
                                                        <%= product.product_title %>
                                                    </a></h6>
                                                <div class="rating">
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </div>
                                                <div class="product__price">$<%= product.product_price %>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                <% }) %>
                        <% } %>
                        <!-- show All product -->
                        <% if (locals.allProducts) { %>
                            <% allProducts.collectionData.forEach(product=> { %>
                                <div class="col-lg-4 col-md-6">
                                    <div class="product__item">
                                        <div class="product__item__pic set-bg" data-setbg="/uploads/<%= product.product_image[0] %>">
                                            <% if (product.product_new==true) { %>
                                                <div class="label new"> New</div>
                                            <% } %>
                                            <% if(product.product_on_sales==true) {%>
                                                <div class="label sale"> Sale</div>
                                            <% }%>
                                            <ul class="product__hover">
                                                <li>
                                                    <a href="/uploads/<%= product.product_image[0] %>" class="image-popup">
                                                        <span class="arrow_expand"></span>
                                                    </a>
                                                </li>
                                                <li>
                                                    <button>
                                                        <span class="icon_heart_alt like"></span>
                                                    </button>
                                                </li>
                                                <li>
                                                    <button onclick="((e)=>{ addToCart('<%= product._id %>') })()">
                                                        <span class="icon_bag_alt"></span>
                                                    </button>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="product__item__text">
                                            <h6>
                                                <a href="/product/<%= product._id%>">
                                                    <%= product.product_title %>
                                                </a>
                                            </h6>
                                            <div class="rating">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            </div>
                                            <div class="product__price">
                                                $ <%= product.product_price %> 
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            <% }) %>
                        <% } %>
                        <!-- Show sub_category_products -->
                        <% if (locals.sub_category_products) { %>
                            <% sub_category_products.collectionData[0].sub_category_products?.forEach(product=> { %>
                                <div class="col-lg-4 col-md-6">
                                    <div class="product__item">
                                        <div class="product__item__pic set-bg" data-setbg="/uploads/<%= product.product_image[0] %>">
                                        <% if (product.product_new==true) { %>
                                            <div class="label new"> New </div>
                                        <% } %>
                                        <% if(product.product_on_sales==true){%>
                                            <div class="label sale">Sale</div>
                                        <% }%>
                                        <ul class="product__hover">
                                            <li>
                                                <a href="/uploads/<%= product.product_image[0] %>" class="image-popup">
                                                    <span class="arrow_expand"></span>
                                                </a>
                                            </li>
                                            <li>
                                                <button onclick="(()=>{ likebtn('<%= product._id %>') })()">
                                                    <span class="icon_heart_alt like"></span>
                                                </button>
                                            </li>
                                            <li>
                                                <button onclick="((e)=>{ addToCart('<%= product._id %>') })()">
                                                    <span class="icon_bag_alt"></span>
                                                </button>
                                            </li>
                                        </ul>
                                        </div>
                                        <div class="product__item__text">
                                            <h6>
                                                <a href="/product/<%= product._id%>">
                                                    <%= product.product_title %>
                                                 </a>
                                            </h6>
                                            <div class="rating">
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                                <i class="fa fa-star"></i>
                                            </div>
                                            <div class="product__price">
                                                $ <%= product.product_price %>
                                            </div>
                                        </div>
                                    </div>
                               </div>
                           <% }) %>
                        <% } %>
                        <div class="col-lg-12 text-center">
                            <div class="pagination__option">
                                <% if (locals.products) { %>
                                    <% if (products.totalDocs > products.limit) { %>
                                        <% for( let i=1; i<=products.totalPages; ++i ) { %>
                                            <a href="page/<%= i  %>"> <%= i %> </a>
                                        <% } %>
                                    <% } %>
                                <% } %>

                                <!-- show All product pagination-->
                                <% if (locals.allProducts) { %>
                                    <% if (allProducts.totalDocs> allProducts.limit) { %>
                                        <% for( let i=1; i<=allProducts.totalPages; ++i ) { %>
                                            <a href="/shop/<%= i  %>"> <%= i %></a>
                                        <% } %>
                                    <% } %>
                                <% } %>
                                <!-- show sub_category_products pagination -->
                                <% if (locals.sub_category_products) { %>
                                    <% if (sub_category_products.totalDocs> sub_category_products.limit) { %>
                                        <% for(  let  i=1;  i<=sub_category_products.totalPages;  ++i  )  {  %>
                                            <a href="<%= i  %>">  <%= i %> </a>
                                        <% } %>
                                    <% }  %>
                                <% } %>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Shop Section End -->
    <!-- Instagram Begin -->
    <%- include('../site_partials/social_links') %>
        <!-- Instagram End -->

        <!-- Footer Section Begin -->
    <%- include('../site_partials/footer') %>
            <!-- Footer Section End -->

            <!-- Search Begin -->
    <div class="search-model">
        <div class="h-100 d-flex align-items-center justify-content-center">
            <div class="search-close-switch">+</div>
            <form class="search-model-form">
                <input type="text" id="search-input" placeholder="Search here.....">
            </form>
        </div>
    </div>
            <!-- Search End -->
    <%- include('../site_partials/script') %>
    <script>
        const productID = []
        function addToCart(id) {
            productID.push(id)
            localStorage.setItem("IDs", productID)
        }
    </script>
    </body>

</html>